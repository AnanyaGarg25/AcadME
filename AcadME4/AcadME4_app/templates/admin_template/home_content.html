{% extends 'admin_template/base_template.html' %}
{% block page_title %}
Home
    <div id="greeting" style="font-size: 1.2em; color: #333; margin-top: 10px;"></div>
{% endblock page_title %}
{% block main_content %}
<section class="content">
  <div class="container-fluid">
    <!-- Small Boxes Row -->
    <div class="row">
      <div class="col-lg-3 col-6">
        <!-- Small Box with Modern Pastel Design -->
        <div class="small-box pastel-card">
          <div class="icon">
            <i class="fas fa-user-graduate"></i>
          </div>
          <div class="inner">
            <h3>{{ student_count }}</h3>
            <p>Total Students</p>
          </div>
          <a href="{% url 'manage_student' %}" class="small-box-footer">
            More info <i class="fas fa-arrow-circle-right"></i>
          </a>
        </div>
      </div>
      <style>
        /* Light Pink Gradient for Pastel Card */
        .pastel-card {
          background: linear-gradient(135deg, #FF85A2, #FFC1D6);
          border-radius: 12px;
          padding: 25px;
          text-align: center;
          box-shadow: 3px 3px 15px rgba(0,0,0,0.15);
          transition: all 0.3s ease-in-out;
          color: #FFF;
          position: relative;
          overflow: hidden;
        }
        .pastel-card:hover {
          transform: scale(1.05);
          box-shadow: 5px 5px 15px rgba(0,0,0,0.2);
        }
        .pastel-card .icon {
          font-size: 28px;
          color: rgba(255,255,255,0.8);
          position: absolute;
          top: 10px;
          left: 15px;
        }
        .pastel-card .inner {
          margin-top: -10px;
        }
        .pastel-card h3 {
          font-size: 30px;
          font-weight: bold;
          margin-bottom: 5px;
        }
        .pastel-card p {
          font-size: 16px;
          font-weight: 500;
        }
        .small-box-footer {
          display: block;
          padding: 12px;
          background: rgba(255,255,255,0.2);
          text-decoration: none;
          color: #FFF !important;
          font-weight: bold;
          border-radius: 0 0 12px 12px;
          transition: background 0.3s ease-in-out, color 0.3s ease-in-out;
        }
        .small-box-footer:hover {
          background: rgba(255,255,255,0.3);
        }
      </style>

      <!-- ./col -->
      <div class="col-lg-3 col-6">
        <!-- Small Box with Icy Blue Gradient -->
        <div class="small-box icy-blue-card">
          <div class="icon">
            <i class="fas fa-user-tie"></i>
          </div>
          <div class="inner">
            <h3>{{ staff_count }}</h3>
            <p>Total Staff</p>
          </div>
          <a href="{% url 'manage_staff' %}" class="small-box-footer">
            More info <i class="fas fa-arrow-circle-right"></i>
          </a>
        </div>
      </div>
      <style>
        /* Icy Blue Gradient for Staff Count Box */
        .icy-blue-card {
          background: linear-gradient(135deg, #A0D9F6, #4DA8DA);
          border-radius: 12px;
          padding: 25px;
          text-align: center;
          box-shadow: 3px 3px 15px rgba(0,0,0,0.15);
          transition: all 0.3s ease-in-out;
          color: #FFF;
          position: relative;
          overflow: hidden;
        }
        .icy-blue-card:hover {
          transform: scale(1.05);
          box-shadow: 5px 5px 15px rgba(0,0,0,0.2);
        }
        .icy-blue-card .icon {
          font-size: 28px;
          color: rgba(255,255,255,0.8);
          position: absolute;
          top: 10px;
          left: 15px;
        }
        .icy-blue-card .inner {
          margin-top: -10px;
        }
        .icy-blue-card h3 {
          font-size: 30px;
          font-weight: bold;
          margin-bottom: 5px;
        }
        .icy-blue-card p {
          font-size: 16px;
          font-weight: 500;
        }
      </style>

     <!-- ./col -->
      <div class="col-lg-3 col-6">
        <!-- Small Box with Pastel Red Gradient -->
        <div class="small-box bg-warning">
          <div class="icon">
            <i class="fas fa-book"></i>
          </div>
          <div class="inner">
            <h3>{{ course_count }}</h3>
            <p>Total Courses</p>
          </div>
          <a href="{% url 'manage_course' %}" class="small-box-footer">
            More info <i class="fas fa-arrow-circle-right"></i>
          </a>
        </div>
      </div>
      <style>
        /* Ensure all small boxes have the same size */
        .small-box {
          height: 160px;
          display: flex;
          flex-direction: column;
          justify-content: center;
          border-radius: 12px;
          text-align: center;
          box-shadow: 3px 3px 15px rgba(0, 0, 0, 0.15);
          transition: all 0.3s ease-in-out;
          position: relative;
          overflow: hidden;
        }
        .small-box:hover {
          transform: scale(1.05);
          box-shadow: 5px 5px 15px rgba(0,0,0,0.2);
        }
        .bg-warning {
          background: linear-gradient(135deg, #FF9A9E, #F76C6C) !important;
        }
        .small-box .icon {
          font-size: 28px;
          color: rgba(255, 255, 255, 0.8);
          position: absolute;
          top: 10px;
          left: 15px;
        }
        .small-box .inner {
          margin-top: -10px;
        }
        .small-box h3 {
          font-size: 30px;
          font-weight: bold;
          margin-bottom: 5px;
          color: #FFF;
        }
        .small-box p {
          font-size: 16px;
          font-weight: 500;
          color: #F8F9FA;
        }
        .small-box-footer {
          display: block;
          padding: 12px;
          background: rgba(255, 255, 255, 0.2);
          text-decoration: none;
          color: #FFF !important;
          font-weight: bold;
          border-radius: 0 0 12px 12px;
          transition: background 0.3s ease-in-out, color 0.3s ease-in-out;
        }
        .small-box-footer:hover,
        .small-box-footer:focus,
        .small-box-footer:visited {
          background: rgba(255, 255, 255, 0.3) !important;
          color: #FFF !important;
        }
        .small-box-footer i,
        .small-box-footer span {
          color: #FFF !important;
        }
      </style>

      <!-- ./col -->
      <div class="col-lg-3 col-6">
        <!-- Small Box with Pastel Teal Gradient -->
        <div class="small-box bg-danger">
          <div class="inner">
            <h3>{{ subject_count }}</h3>
            <p>Total Subject</p>
          </div>
          <div class="icon">
            <i class="ion ion-pie-graph"></i>
          </div>
          <a href="{% url 'manage_subject' %}" class="small-box-footer">
            More info <i class="fas fa-arrow-circle-right"></i>
          </a>
        </div>
      </div>
      <style>
        .small-box {
          height: 160px;
          display: flex;
          flex-direction: column;
          justify-content: center;
          border-radius: 12px;
          text-align: center;
          box-shadow: 3px 3px 15px rgba(0, 0, 0, 0.15);
          transition: all 0.3s ease-in-out;
          position: relative;
          overflow: hidden;
        }
        .small-box:hover {
          transform: scale(1.05);
          box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.2);
        }
        .bg-danger {
          background: linear-gradient(135deg, #A0E7E5, #5AC8C8) !important;
        }
        .small-box .icon {
          font-size: 28px;
          color: rgba(255, 255, 255, 0.8);
          position: absolute;
          top: 10px;
          left: 15px;
        }
        .small-box .inner {
          margin-top: -10px;
        }
        .small-box h3 {
          font-size: 30px;
          font-weight: bold;
          margin-bottom: 5px;
          color: #FFF;
        }
        .small-box p {
          font-size: 16px;
          font-weight: 500;
          color: #F8F9FA;
        }
        .small-box-footer {
          display: block;
          padding: 12px;
          background: rgba(255, 255, 255, 0.2);
          text-decoration: none;
          color: #FFF !important;
          font-weight: bold;
          border-radius: 0 0 12px 12px;
          transition: background 0.3s ease-in-out, color 0.3s ease-in-out;
        }
        .small-box-footer:hover,
        .small-box-footer:focus {
          background: rgba(255, 255, 255, 0.3);
          color: #FFF !important;
        }
      </style>
    </div>
    <!-- ./row -->

    <!-- Charts Row -->
    <div class="row">
      <div class="col-lg-6">
        <div class="card card-danger">
          <div class="card-header">
            <h3 class="card-title">Student and Staff Chart</h3>
            <div class="card-tools">
              <button type="button" class="btn btn-tool" data-card-widget="collapse">
                <i class="fas fa-minus"></i>
              </button>
              <button type="button" class="btn btn-tool" data-card-widget="remove">
                <i class="fas fa-times"></i>
              </button>
            </div>
          </div>
          <div class="card-body">
            <canvas id="pieChart" style="min-height:250px; height:250px; max-height:250px; max-width:100%;"></canvas>
          </div>
        </div>
      </div>
      <style>
        /* Card Styling */
        .card {
          border-radius: 10px;
          box-shadow: 4px 4px 12px rgba(0,0,0,0.15);
          transition: all 0.3s ease-in-out;
          border: none;
        }
        .card:hover {
          box-shadow: 6px 6px 18px rgba(0,0,0,0.2);
          transform: scale(1.02);
        }
        .card-danger .card-header {
          background: #339DFF !important;
        }
        .card-header {
          color: white;
          font-weight: bold;
          font-size: 18px;
          padding: 15px;
        }
        .card-tools button {
          color: white !important;
          font-size: 14px;
        }
        .card-body {
          background: #F9F9F9;
          padding: 15px;
          border-radius: 0 0 10px 10px;
        }
        .card-info:not(.card-outline)>.card-header {
    background-color: #339DFF;
}
        .card-success:not(.card-outline)>.card-header {
    background-color: #339DFF;
}
      </style>
      <div class="col-lg-6">
        <div class="card card-success">
          <div class="card-header">
            <h3 class="card-title">Total Subject in Each Courses</h3>
            <div class="card-tools">
              <button type="button" class="btn btn-tool" data-card-widget="collapse">
                <i class="fas fa-minus"></i>
              </button>
              <button type="button" class="btn btn-tool" data-card-widget="remove">
                <i class="fas fa-times"></i>
              </button>
            </div>
          </div>
          <div class="card-body">
            <canvas id="donutChart" style="min-height:250px; height:250px; max-height:250px; max-width:100%;"></canvas>
          </div>
        </div>
      </div>
    </div>
    <!-- /.row -->

    <!-- Second Charts Row -->
    <div class="row">
      <div class="col-lg-6">
        <div class="card card-info">
          <div class="card-header">
            <h3 class="card-title">Total Student in Each Course</h3>
            <div class="card-tools">
              <button type="button" class="btn btn-tool" data-card-widget="collapse">
                <i class="fas fa-minus"></i>
              </button>
              <button type="button" class="btn btn-tool" data-card-widget="remove">
                <i class="fas fa-times"></i>
              </button>
            </div>
          </div>
          <div class="card-body">
            <canvas id="pieChart2" style="min-height:250px; height:250px; max-height:250px; max-width:100%;"></canvas>
          </div>
        </div>
      </div>
      <!-- Mini Calendar Row -->
      <div class="col-lg-6 col-12">
        <div class="card card-primary card-mini-calendar">
          <div class="card-header">
            <h3 class="card-title" style="font-size:1em;">Mini Calendar</h3>
            <div class="card-tools">
              <button type="button" class="btn btn-tool" data-card-widget="collapse">
                <i class="fas fa-minus"></i>
              </button>
              <button type="button" class="btn btn-tool" data-card-widget="remove">
                <i class="fas fa-times"></i>
              </button>
            </div>
          </div>
          <div class="card-body">
            <!-- Embedded Google Calendar -->
            <iframe
              src="https://calendar.google.com/calendar/embed?src=en.indian%23holiday%40group.v.calendar.google.com&ctz=Asia%2FKolkata"
              frameborder="0"
              scrolling="no">
            </iframe>
          </div>
        </div>
      </div>
    </div>
    <!-- /.row -->

  </div>
  <!-- /.container-fluid -->
  <div style="background: linear-gradient(135deg, #FFDEE9, #B5FFFC); width: 100%; height: 50px; display: flex; align-items: center; justify-content: space-around;">
    <div id="digitalClock" style="font-size: 1.2em; font-weight: bold; color: #333;">Loading time...</div>
    <div id="inspirationalQuote" style="font-size: 1.2em; font-weight: bold; font-style: italic; color: #555;">Your inspirational quote goes here.</div>
  </div>
  <!-- FullCalendar CSS -->
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css" rel="stylesheet" />
  <style>
    /* Common Card Styles */
    .card {
      border-radius: 10px;
      box-shadow: 4px 4px 12px rgba(0,0,0,0.15);
      transition: all 0.3s ease-in-out;
      border: none;
    }
    .card:hover {
      box-shadow: 6px 6px 18px rgba(0,0,0,0.2);
      transform: scale(1.02);
    }
    .card-danger .card-header {
      background: #339DFF !important;
    }
    .card-header {
      color: #FFF;
      font-weight: bold;
      font-size: 18px;
      padding: 15px;
    }
    .card-tools button {
      color: #FFF !important;
      font-size: 14px;
    }
    .card-body {
      padding: 15px;
      border-radius: 0 0 10px 10px;
    }
    /* -------------------- Mini Calendar Styles -------------------- */
    .card-mini-calendar {
      height: 338px;
      color: #333;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      border-radius: 0;
    }
    .card-mini-calendar .card-body {
      flex: 1;
      padding: 0;
    }
    .card-mini-calendar iframe {
      width: 100%;
      height: 100%;
      border: 0;
    }
    .card-primary:not(.card-outline)>.card-header {
      background-color: #339DFF;
    }
  </style>
</section>
{% endblock main_content %}
{% block custom_js %}
<!-- FullCalendar JS -->
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  // Greet the user based on time of day
  $(document).ready(function(){
    function greetUser() {
      const now = new Date();
      const hour = now.getHours();
      let greeting = "";
      if(hour < 12){
        greeting = "Good Morning!";
      } else if(hour < 18) {
        greeting = "Good Afternoon!";
      } else {
        greeting = "Good Evening!";
      }
      document.getElementById("greeting").innerText = greeting;
    }
    greetUser();

    // Digital Clock: update every second
    function updateClock() {
      const now = new Date();
      const hours = now.getHours().toString().padStart(2, '0');
      const minutes = now.getMinutes().toString().padStart(2, '0');
      const seconds = now.getSeconds().toString().padStart(2, '0');
      document.getElementById('digitalClock').innerText = hours + ":" + minutes + ":" + seconds;
    }
    setInterval(updateClock, 1000);
    updateClock();

    // Inspirational Quote: display a random quote
    const quotes = [
      "Believe you can and you're halfway there. – Theodore Roosevelt",
      "The only way to do great work is to love what you do. – Steve Jobs",
      "The future belongs to those who believe in the beauty of their dreams. – Eleanor Roosevelt",
      "You miss 100% of the shots you don't take. – Wayne Gretzky",
      "Success is not final, failure is not fatal: It is the courage to continue that counts. – Winston Churchill"
    ];
    document.getElementById('inspirationalQuote').innerText = quotes[Math.floor(Math.random() * quotes.length)];
  });

  // Pastel color array (unchanged)
  var pastelColors = [
    '#FF7F89', '#AA82FF', '#B0D684', '#70D6D4', '#FFEB88', '#FF947D', '#96AEC6',
    '#FFC3A0', '#A0E7E5', '#B4A7D6', '#FFD3B6', '#E2F0CB', '#FEC8D8', '#D4A5A5',
    '#FFB6C1', '#D1A3FF', '#A5E6E6', '#B0E0E6', '#F3E5AB', '#FFBB9E', '#A0C4FF',
    '#FFDAC1', '#A2D2FF', '#C6D57E', '#FFCF81', '#E0BBE4', '#D8F3DC', '#FFAFCC',
    '#FDE4CF', '#A9DEF9', '#B5CDA3', '#F5E1DA', '#F3B8A8', '#D5AAFF', '#B8E2F2',
    '#F1E1A6', '#FBC4AB', '#C5D9E2', '#FFCCCB', '#D9F2D9', '#FEC5E5', '#D4A373',
    '#F2CC8F', '#F4BFBF', '#D6E5FA', '#FFD166', '#99E2B4', '#EAC7C7', '#C4B0FF'
  ];

  // Pie Chart for Student and Staff Chart
  var pieLabels = ['Students', 'Staffs'];
  var pieDataValues = [{{ student_count }}, {{ staff_count }}];
  var pieData = {
    labels: pieLabels,
    datasets: [{
      data: pieDataValues,
      backgroundColor: pastelColors.slice(0, pieLabels.length)
    }]
  };
  var pieChartCanvas = document.getElementById('pieChart').getContext('2d');
  var pieOptions = {
    maintainAspectRatio: false,
    responsive: true,
    plugins: {
      legend: {
        position: 'right',
        align: 'start'
      }
    }
  };
  var pieChart = new Chart(pieChartCanvas, {
    type: 'pie',
    data: pieData,
    options: pieOptions
  });

  // Donut Chart for Subjects in Each Course
  var courseNames = {{ course_name_list|safe }};
  var subjectCounts = {{ subject_count_list }};
  var donutData = {
    labels: courseNames,
    datasets: [{
      data: subjectCounts,
      backgroundColor: pastelColors.slice(0, courseNames.length)
    }]
  };
  var donutChartCanvas = document.getElementById('donutChart').getContext('2d');
  var donutOptions = {
    maintainAspectRatio: false,
    responsive: true,
    plugins: {
      legend: {
        position: 'right',
        align: 'start'
      }
    }
  };
  var donutChart = new Chart(donutChartCanvas, {
    type: 'doughnut',
    data: donutData,
    options: donutOptions
  });

  // Pie Chart for Total Students in Each Course
  var studentCountsInCourse = {{ student_count_list_in_course }};
  var pieData2 = {
    labels: courseNames,
    datasets: [{
      data: studentCountsInCourse,
      backgroundColor: pastelColors.slice(0, courseNames.length)
    }]
  };
  var pieChartCanvas2 = document.getElementById('pieChart2').getContext('2d');
  var pieOptions2 = {
    maintainAspectRatio: false,
    responsive: true,
    plugins: {
      legend: {
        position: 'right',
        align: 'start'
      }
    }
  };
  var pieChart2 = new Chart(pieChartCanvas2, {
    type: 'pie',
    data: pieData2,
    options: pieOptions2
  });
</script>
{% endblock custom_js %}